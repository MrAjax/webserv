2024-02-14,sdfsdfsdddddddddddddddddddddddddddd
2024-02-13,%23include+%22HttpRequestParsing.hpp%22%0D%0A%0D%0A%0D%0AHttpRequestParsing%3A%3AHttpRequestParsing%28HttpRequest+%26request%29+%3A+_request%28request%29%0D%0A%7B%0D%0A++++std%3A%3Astringstream+ss%3B%0D%0A%09ss+%3C%3C+_request.getConnfd%28%29%3B%0D%0A%09_debugFd+%3D+ss.str%28%29%3B%0D%0A%7D%0D%0A%0D%0AHttpRequestParsing%3A%3A%7EHttpRequestParsing%28%29+%7B%7D%0D%0A%0D%0Abool%09HttpRequestParsing%3A%3AisMaxSize%28std%3A%3Asize_t+SIZE%29%0D%0A%7B%0D%0A%09if+%28SIZE+%3E+MAX_HEADER_SIZE+%26%26%0D%0A%09%09%28_request.getStatusCode%28%29+%3D%3D+PROCESSING_HEADER+%7C%7C+_request.getStatusCode%28%29+%3D%3D+NEW%29%29%0D%0A%09%7B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+Header+%3E+max_size_header+%22++%2B+int_to_str%28SIZE%29%2C+ERROR%29%3B%0D%0A%09%09_request.setStatusCode%28431%29%3B%0D%0A%09%09return+%28true%29%3B%0D%0A%09%7D%0D%0A%09if+%28_request.getMyserver%28%29+%21%3D+NULL+%26%26+SIZE+%3E+_request.getMaxBodySize%28%29+%26%26%0D%0A%09%09%28_request.getStatusCode%28%29+%3D%3D+DONE_HEADER_CHECKING+%7C%7C+_request.getStatusCode%28%29+%3D%3D+PROCESSING_BODY%29%29%0D%0A%09%7B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+Body+%3E+max_size+%22+%2B+int_to_str%28SIZE%29+%2B+%22+max+size+is+%22+%2B+int_to_str%28_request.getMaxBodySize%28%29%29%2C+ERROR%29%3B%0D%0A%09%09_request.setStatusCode%28413%29%3B%0D%0A%09%09return+%28true%29%3B%0D%0A%09%7D%0D%0A%09return+%28false%29%3B%0D%0A%7D%0D%0A%0D%0Abool++++HttpRequestParsing%3A%3AparsingHeader%28void%29%0D%0A%7B%0D%0A%09if+%28_request.getStatusCode%28%29+%21%3D+NEW+%26%26+_request.getStatusCode%28%29+%21%3D+PROCESSING_HEADER%29%0D%0A%09%09return+%28false%29%3B%0D%0A%09std%3A%3Astring+delimiteur+%3D+%22%5Cr%5Cn%5Cr%5Cn%22%3B%0D%0A%09std%3A%3Asize_t+pos+%3D+_request.getSaveString%28%29.find%28delimiteur%29%3B%0D%0A%09if+%28pos+%3D%3D+std%3A%3Astring%3A%3Anpos%29%0D%0A%09%7B%0D%0A%09%09if+%28isMaxSize%28_request.getSaveString%28%29.size%28%29%29+%3D%3D+true%29%0D%0A%09%09%09return+%28false%29%3B%0D%0A%09%09_request.setStatusCode%28PROCESSING_HEADER%29%3B%0D%0A%09%09return+%28false%29%3B%0D%0A%09%7D%0D%0A%09_request.setHeaderRequest%28_request.getSaveString%28%29.substr%280%2C+pos+%2F**%2F%2Bdelimiteur.size%28%29%2F**%2F%29%29%3B%0D%0A%09if+%28_request.getSaveString%28%29.size%28%29+%3E+pos+%2F*%2Bdelimiteur.size%28%29*%2F%29%0D%0A%09%09_request.setSaveString%28_request.getSaveString%28%29.substr%28pos++%2F**%2F%2Bdelimiteur.size%28%29%2F**%2F%29%29%3B%0D%0A%09else%0D%0A%09%09_request.getSaveString%28%29+%3D+%22%22%3B%0D%0A%09if+%28isMaxSize%28_request.getHeaderRequest%28%29.size%28%29%29+%3D%3D+true%29%0D%0A%09%09return+%28false%29%3B%0D%0A%09if+%28parseAllAttributes%28_request.getHeaderRequest%28%29%29+%3D%3D+false%29%0D%0A%09%09return+%28false%29%3B%0D%0A++++if+%28%21_request.getStrContentLength%28%29.empty%28%29%29%0D%0A%09%7B%0D%0A%09%09ssize_t+temp+%3D+strToSsize_t%28_request.getStrContentLength%28%29%29%3B%0D%0A++++++++if+%28temp+%3D%3D+-1%29%0D%0A%09%09%7B%0D%0A%09%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+bad+synthax+content-length+%3A+%22%0D%0A%09%09%09%2B+_request.getStrContentLength%28%29%2C+ERROR%29%3B%0D%0A%09%09%09_request.setStatusCode%28400%29%3B%0D%0A%09%09%09return+%28false%29%3B%0D%0A%09%09%7D%0D%0A%09%09_request.setContentLength%28temp%29%3B%0D%0A%09%7D%0D%0A++++_request.setStatusCode%28DONE_HEADER%29%3B%0D%0A%09return+%28true%29%3B%0D%0A%7D%0D%0A%0D%0Aint%09HttpRequestParsing%3A%3Achunked%28%29%0D%0A%7B%0D%0A%09std%3A%3Astring+copy+%3D+_request.getSaveString%28%29%3B%0D%0A%09std%3A%3Astring+delimiteur+%3D+%22%5Cr%5Cn%22%3B%0D%0A%0D%0A%09std%3A%3Astring%09hexa1%3B%0D%0A%09std%3A%3Asize_t+end_pos1+%3D+findLine%28copy%2C+hexa1%2C+delimiteur%29%3B%0D%0A%09%0D%0A%09std%3A%3Astring%09data2%3B%0D%0A%09std%3A%3Asize_t+end_pos2+%3D+findLine%28copy%2C+data2%2C+delimiteur%29%3B%0D%0A%09%2F%2F+server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+hexa+%5B%22+%2B+hexa1+%2B+%22%5D+data+%5B%22+%2B+data2+%2B+%22%5D%22%2C+ERROR%29%3B%0D%0A%09if+%28end_pos1+%3D%3D+std%3A%3Astring%3A%3Anpos+%7C%7C+end_pos2+%3D%3D+std%3A%3Astring%3A%3Anpos%29%0D%0A%09%09return+-1%3B%0D%0A%09ssize_t+size%3B%0D%0A%09std%3A%3Astringstream%28hexa1%29+%3E%3E+std%3A%3Ahex+%3E%3E+size%3B%0D%0A%09if+%28size+%3D%3D+0%29%0D%0A%09%09return+%28true%29%3B%0D%0A%09else+if+%28size+%3C+0%29%0D%0A%09%7B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+bad+synthax+in+body%3A+%22+%2B+hexa1%2C+ERROR%29%3B%0D%0A%09%09_request.setStatusCode%28400%29%3B%0D%0A%09%09return+%28-1%29%3B%0D%0A%09%7D%0D%0A%09else+if+%28size+%3E+static_cast%3Cssize_t%3E%28data2.size%28%29%29%29%0D%0A%09%7B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+bad+synthax+in+body%3A+body+chunk+size%22+%2B+hexa1+%2B+%22+%3E+chunk+data.size%28%29+%22+%2B+int_to_str%28data2.size%28%29%29%2C+ERROR%29%3B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+data+%3A+%22+%2B+data2%2C+ERROR%29%3B%0D%0A%09%09_request.setStatusCode%28400%29%3B%0D%0A%09%09return+%28-1%29%3B%0D%0A%09%7D%0D%0A%09_request.setBodyRequest%28_request.getBodyRequest%28%29+%2B+data2.substr%280%2C+size%29%29%3B%0D%0A%09_request.setSaveString%28copy%29%3B%0D%0A%09_request.setContentLength%28_request.getContentLength%28%29+%2B+size%29%3B%0D%0A%09return+%28false%29%3B%0D%0A%7D%0D%0A%0D%0Abool++++HttpRequestParsing%3A%3AparsingBody%28void%29%0D%0A%7B%0D%0A%09if+%28_request.getContentLength%28%29+%3C%3D+0+%26%26+_request.getTransferEncoding%28%29.empty%28%29%29%0D%0A%09%7B%0D%0A%09%09_request.setStatusCode%28202%29%3B%0D%0A%09%09return+%28true%29%3B%0D%0A%09%7D%0D%0A%09if+%28_request.getTransferEncoding%28%29+%3D%3D+%22chunked%22%29%0D%0A%09%7B%0D%0A%09%09if+%28_request.getContentLength%28%29+%3D%3D+-1%29%0D%0A%09%09%09_request.setContentLength%280%29%3B%0D%0A%09%09int+status+%3D+false%3B%0D%0A%09%09for+%28%3Bstatus+%3D%3D+false%3B%29%0D%0A%09%09%09status+%3D+chunked%28%29%3B%0D%0A%09%09if+%28status+%3D%3D+true%29%0D%0A%09%09%7B%0D%0A%09%09%09_request.setSaveString%28%22%22%29%3B%0D%0A%09%09%09_request.setStatusCode%28202%29%3B%0D%0A%09%09%09return+%28true%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%09else%0D%0A%09%7B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+content-length+%22+%2B+int_to_str%28_request.getContentLength%28%29%29%2C+ERROR%29%3B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+head+length+%22+%2B+int_to_str%28_request.getHeaderRequest%28%29.size%28%29%29%2C+ERROR%29%3B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+savestring+length+%22+%2B+int_to_str%28_request.getSaveString%28%29.size%28%29%29%2C+ERROR%29%3B%0D%0A%09%09%2F%2F+server_log%28_debugFd+%2B+%22+%5B%22+%2B+_request.getSaveString%28%29+%2B+%22%5D%22%2C+ERROR%29%3B%0D%0A%0D%0A%09%09if+%28isMaxSize%28_request.getSaveString%28%29.size%28%29%29+%3D%3D+true%29+%7B%0D%0A%09%09%09return+%28false%29%3B%0D%0A%09%09%7D%0D%0A%09%09if+%28_request.getSaveString%28%29.size%28%29+%3E%3D+static_cast%3C+std%3A%3Asize_t+%3E%28_request.getContentLength%28%29%29%29%0D%0A%09%09%7B%0D%0A%09%09%09_request.setBodyRequest%28_request.getSaveString%28%29.substr%280%2C+_request.getContentLength%28%29%29%29%3B%0D%0A%09%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+save_string+%22+%2B+_request.getSaveString%28%29%2C+ERROR%29%3B%0D%0A%0D%0A%09%09%09_request.setSaveString%28%22%22%29%3B%0D%0A%09%09%09_request.setStatusCode%28202%29%3B%0D%0A%09%09%09return+%28true%29%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%09_request.setStatusCode%28PROCESSING_BODY%29%3B%0D%0A%09return+%28false%29%3B%0D%0A%7D%0D%0A%0D%0A%2F%2F-----------Utils----------------%0D%0A%0D%0Astd%3A%3Asize_t%09HttpRequestParsing%3A%3AfindLine%28std%3A%3Astring+%26header%2C+std%3A%3Astring+%26line%2C+std%3A%3Astring+%26delimiteur%29%0D%0A%7B%0D%0A%09std%3A%3Asize_t%09end_pos+%3D+header.find%28delimiteur%29%3B%0D%0A%09if+%28end_pos+%3D%3D+std%3A%3Astring%3A%3Anpos%29%0D%0A%09%7B%0D%0A%09%09line+%3D+header%3B%0D%0A%09%09return+%28end_pos%29%3B%0D%0A%09%7D%0D%0A%09line+%3D+header.substr%280%2C+end_pos%29%3B%0D%0A%09header+%3D+header.substr%28end_pos+%2B+delimiteur.size%28%29%29%3B%0D%0A%09return+%28end_pos%29%3B%0D%0A%7D%0D%0A%0D%0A%2F%2F-----------Header+parser----------------%0D%0A%0D%0Abool%09HttpRequestParsing%3A%3AparsingHeader_method_path_http%28std%3A%3Astring+%26line%29%0D%0A%7B%0D%0A%09struct+_tab+%0D%0A%09%7B++++++++++++++++%2F%2F+La+cl%C3%A9%0D%0A++++%09void+%28HttpRequest%3A%3A*setter%29%28const+std%3A%3Astring%26%29%3B%0D%0A%09%7D%3B%0D%0A%09_tab+tab%5B3%5D+%3D+%7B%7B%26HttpRequest%3A%3AsetMethod%7D%2C+%7B%26HttpRequest%3A%3AsetPath%7D%2C+%7B%26HttpRequest%3A%3AsetHttp%7D%7D%3B%0D%0A%09std%3A%3Astringstream%09ss%28line%29%3B%0D%0A%09std%3A%3Astring%09%09%09output%3B%0D%0A%0D%0A%09for+%28int+i+%3D+0%3B+i+%3C+3%3B+i%2B%2B%29%0D%0A%09%7B%0D%0A%09%09if+%28%21%28ss+%3E%3E+output%29%29%0D%0A%09%09%7B%0D%0A%09%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+bad+synthax+header+in+1st+line+%3A+%22+%2B+line%2C+ERROR%29%3B%0D%0A%09%09%09_request.setStatusCode%28400%29%3B%0D%0A%09%09%09return+%28false%29%3B%0D%0A%09%09%7D%0D%0A%09%09%28_request.*tab%5Bi%5D.setter%29%28output%29%3B%0D%0A%09%7D%0D%0A%09if+%28ss+%3E%3E+output%29%0D%0A%09%7B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+bad+synthax+header+in+1st+line+%3A+%22+%2B+line%2C+ERROR%29%3B%0D%0A%09%09_request.setStatusCode%28400%29%3B%0D%0A%09%09return+%28false%29%3B%0D%0A%09%7D%0D%0A%09return+%28true%29%3B%0D%0A%7D%0D%0A%0D%0Abool%09HttpRequestParsing%3A%3AparsingHeader_rest%28std%3A%3Astring+%26line%2C+std%3A%3Astring+const+%26+keyWord%2C+std%3A%3Astring+%26output%29%0D%0A%7B%0D%0A%09std%3A%3Astringstream%09ss%28line%29%3B%0D%0A%09std%3A%3Astring%09%09%09token%3B%0D%0A%0D%0A%09ss+%3E%3E+token%3B%0D%0A%09if+%28token+%21%3D+keyWord%29%0D%0A%09%7B%0D%0A%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+bad+synthax+%3A+%22+%2B+line%2C+ERROR%29%3B%0D%0A%09%09_request.setStatusCode%28400%29%3B%0D%0A%09%09return+%28false%29%3B%0D%0A%09%7D%0D%0A%09else%0D%0A%09%7B%0D%0A%09%09while+%28ss+%3E%3E+token%29%0D%0A%09%09%7B%0D%0A%09%09%09if+%28%21output.empty%28%29%29%0D%0A%09%09%09%09output+%2B%3D+%22+%22%3B%0D%0A%09%09%09output+%2B%3D+token%3B%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%09return+%28true%29%3B%0D%0A%7D%0D%0A%0D%0Abool++++HttpRequestParsing%3A%3AparseAllAttributes%28std%3A%3Astring+header%29%0D%0A%7B%0D%0A%09std%3A%3Asize_t+nbParam+%3D+NBPARAM+-+3%3B%0D%0A%09std%3A%3Asize_t+end_pos%3B%0D%0A%09std%3A%3Astring+delimiteur+%3D+%22%5Cr%5Cn%22%3B%0D%0A%09std%3A%3Astring%09line%3B%0D%0A%0D%0A%09struct+_tab+tab%5BnbParam%5D+%3D+%7B%7B%22Host%3A%22%2C+%26HttpRequest%3A%3AgetHost%2C+%26HttpRequest%3A%3AsetHost%7D%2C+%7B%22User-Agent%3A%22%2C+%26HttpRequest%3A%3AgetUserAgent%2C+%26HttpRequest%3A%3AsetUserAgent%7D%2C%0D%0A%09%09%7B%22Accept%3A%22%2C+%26HttpRequest%3A%3AgetAccept%2C+%26HttpRequest%3A%3AsetAccept%7D%2C+%7B%22Accept-Language%3A%22%2C+%26HttpRequest%3A%3AgetAcceptLanguage%2C+%26HttpRequest%3A%3AsetAcceptLanguage%7D%2C%0D%0A%09%09%7B%22Accept-Encoding%3A%22%2C+%26HttpRequest%3A%3AgetAcceptEncoding%2C+%26HttpRequest%3A%3AsetAcceptEncoding%7D%2C+%7B%22Connection%3A%22%2C+%26HttpRequest%3A%3AgetConnection%2C+%26HttpRequest%3A%3AsetConnection%7D%2C%0D%0A%09%09%7B%22Upgrade-Insecure-Requests%3A%22%2C+%26HttpRequest%3A%3AgetUpInsecureRqst%2C+%26HttpRequest%3A%3AsetUpInsecureRqst%7D%2C+%7B%22Referer%3A%22%2C+%26HttpRequest%3A%3AgetReferer%2C+%26HttpRequest%3A%3AsetReferer%7D%2C%0D%0A%09%09%7B%22Sec-Fetch-Dest%3A%22%2C+%26HttpRequest%3A%3AgetSecFetchDest%2C+%26HttpRequest%3A%3AsetSecFetchDest%7D%2C+%7B%22Sec-Fetch-Mode%3A%22%2C+%26HttpRequest%3A%3AgetSecFetchMode%2C+%26HttpRequest%3A%3AsetSecFetchMode%7D%2C%0D%0A%09%09%7B%22Sec-Fetch-Site%3A%22%2C+%26HttpRequest%3A%3AgetSecFetchSite%2C+%26HttpRequest%3A%3AsetSecFetchSite%7D%2C+%7B%22Content-Length%3A%22%2C+%26HttpRequest%3A%3AgetStrContentLength%2C+%26HttpRequest%3A%3AsetStrContentLength%7D%2C%0D%0A%09%09%7B%22Content-Type%3A%22%2C+%26HttpRequest%3A%3AgetContentType%2C+%26HttpRequest%3A%3AsetContentType%7D%2C+%7B%22Cookie%3A%22%2C+%26HttpRequest%3A%3AgetCookie%2C+%26HttpRequest%3A%3AsetCookie%7D%2C%0D%0A%09%09%7B%22Transfer-Encoding%3A%22%2C+%26HttpRequest%3A%3AgetTransferEncoding%2C+%26HttpRequest%3A%3AsetTransferEncoding%7D%7D%3B%0D%0A%09%0D%0A%09end_pos+%3D+findLine%28header%2C+line%2C+delimiteur%29%3B%0D%0A%09if+%28parsingHeader_method_path_http%28line%29+%3D%3D+false%29%0D%0A%09%09return+%28false%29%3B%0D%0A%09while+%28end_pos+%21%3D+std%3A%3Astring%3A%3Anpos%29%0D%0A%09%7B%0D%0A%09%09end_pos+%3D+findLine%28header%2C+line%2C+delimiteur%29%3B%0D%0A%09%09for+%28std%3A%3Asize_t+i+%3D+0+%3B+i+%3C+nbParam%3B+i%2B%2B%29%0D%0A%09%09%7B%0D%0A%09%09%09if+%28line.find%28tab%5Bi%5D.key%29+%21%3D+std%3A%3Astring%3A%3Anpos%29%0D%0A%09%09%09%7B%0D%0A%09%09%09%09if+%28%21%28%28_request.*%28tab%5Bi%5D.getter%29%29%28%29.empty%28%29%29%29%0D%0A%09%09%09%09%7B%0D%0A%09%09%09%09%09server_log%28%22Request+fd+%22+%2B+_debugFd+%2B+%22+bad+synthax+double+info%22%2C+ERROR%29%3B%0D%0A%09%09%09%09%09_request.setStatusCode%28400%29%3B%0D%0A%09%09%09%09%09return+%28false%29%3B%0D%0A%09%09%09%09%7D%0D%0A%09%09%09%09std%3A%3Astring+output%3B%0D%0A%09%09%09%09if+%28parsingHeader_rest%28line%2C+tab%5Bi%5D.key%2C+output%29+%3D%3D+false%29%0D%0A%09%09%09%09%09return+%28false%29%3B%0D%0A%09%09%09%09%28_request.*%28tab%5Bi%5D.setter%29%29%28output%29%3B%0D%0A%09%09%09%09break+%3B%0D%0A%09%09%09%7D%0D%0A%09%09%7D%0D%0A%09%7D%0D%0A%09_request.setBrutPath%28_request.getPath%28%29%29%3B%0D%0A%09return+%28true%29%3B%0D%0A%7D%0D%0A
2024-02-13,dddddddddddddddddddddddddddddddddd%0D%0Asssssssssssssssssssssssssssss
2024-02-14,ssssssssssssssssssssssssssxx%0D%0Axxxxxxxxxxxxxxxxxxxxxxx
2024-02-21,dddddddddddddddddddddddddddddddddddd
